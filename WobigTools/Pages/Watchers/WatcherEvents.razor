@page "/Watchers/Events"
@using SharedLib.General

@attribute [Authorize(Roles = "WatcherEvents")]

<h3>WatcherEvents</h3>

<div class="textarea" style="height: max-content;">
    @foreach (var line in Constants.WatcherEvents.Messages)
    {
        <div class="display-message">@line</div>
    }
</div>

@code {
    protected override void OnInitialized()
    {
        base.OnInitialized();
        Constants.WatcherEvents.MessagesChanged += IndexAsyncHandler;
    }

    private async void IndexAsyncHandler()
    {
        await InvokeAsync(() =>
        {
            StateHasChanged();
        });
    }
}
