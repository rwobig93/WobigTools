@page "/"
@using SharedLib.General
@using MatBlazor

@inject IMatToaster Toaster

<h1>Get back to work Rick!</h1>

<button class="btn btn-primary" @onclick="AddLog">Add Log</button>
<button class="btn btn-secondary" @onclick="ToastBarage">Toast Barage!</button>

<h2> Log Output: </h2>
<div class="textarea">
    @foreach (var line in Constants.DebugLog.Messages)
    {
        <div class="display-message">@line</div>
    }
</div>

@code {
    protected override void OnInitialized()
    {
        base.OnInitialized();
        Constants.DebugLog.MessagesChanged += IndexAsyncHandler;
    }

    private void AddLog()
    {
        Constants.DebugLog.AddMessage($"Adding a test string here! {Guid.NewGuid()}");
    }

    private async void IndexAsyncHandler()
    {
        await InvokeAsync(() =>
        {
            StateHasChanged();
        });
    }

    private async void ToastBarage()
    {
        Toaster.CustomToast("Test Toast Yo!", "Test Toast Danger", MatToastType.Danger);
        Toaster.CustomToast("Test Toast Yo!", "Test Toast Info", MatToastType.Info);
        Toaster.CustomToast("Test Toast Yo!", "Test Toast Primary", MatToastType.Primary);
        Toaster.CustomToast("Test Toast Yo!", "Test Toast Success", MatToastType.Success);
        Toaster.CustomToast("Test Toast Yo!", "Test Toast Warning", MatToastType.Warning);
    }
}